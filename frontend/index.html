<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Quick Sigma.js Example</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/2.4.0/sigma.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/graphology/0.25.4/graphology.umd.min.js"></script>
  </head>
  <body>

    <div id="container" style="width: 2000px; height: 2000px; background: white"></div>
    <script>

const graph = new graphology.Graph();

document.addEventListener('DOMContentLoaded', function() {
    console.log("Hello, World!");

    const stations =fetch('http://127.0.0.1:8000/stations', {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json',
        },
    })
        .then(response => response.json())
        .catch(error => {
            console.error('Error fetching stations:', error);
        });

    const liaisons = fetch('http://127.0.0.1:8000/liaisons', {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json',
        },
    })
        .then(response => response.json())  
        .catch(error => {
            console.error('Error fetching liaison:', error);
        });
    
        
    Promise.all([stations, liaisons])
        .then(([stations, liaisons]) => {
            renderGraph(stations, liaisons);
        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });

    function renderGraph(stations, liaisons) {

        console.log(stations);
        console.log(liaisons);

        stations.forEach(station => {
            graph.addNode(station["id"], { label: station["stationName"], x: station["x"], y: station["y"], size: 8, color: "black" });
        });

        liaisons.forEach(liaison => {
            graph.addEdge(liaison["station1"], liaison["station2"], { color: "blue" });
        });



    }
    

});
      const sigmaInstance = new Sigma(graph, document.getElementById("container"));

    


    </script>
  </body>
</html>